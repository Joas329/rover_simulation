<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="robot_arm" >	

	<xacro:include filename="macros.xacro"/>

	<material name="white">
        <color rgba="1 1 1 1"/>
    </material>

    <material name="orange">
        <color rgba="1 0.3 0.1 1"/>
    </material>

    <material name="blue">
        <color rgba="0.2 0.2 1 1"/>
    </material>

    <material name="black">
        <color rgba="0 0 0 1"/>
    </material>

	<!--Dummy Link-->
	<!-- <link name="world">
	</link> -->

	<!--Arm Links-->

	<!--Arm 1-->
	<link name="arm_a1">
		<xacro:sw_visual file="ARM-A01"/>
		<xacro:sw_inertial
			m="3.8185"
			X="-3.34872"
			Y="-7.71683"
			Z="0.00031"
			Lxx="100.85864"
			Lxy="2.33423"
			Lxz="-0.07753"
			Lyy="40.30078"
			Lyz="-0.00376"
			Lzz="69.49319"
			file="ARM-A01"
		/>
	</link>

	<joint name="arm_j1" type="revolute">
		<xacro:sw_origin x="-3.50000000" y="0.51712500" z="0"/>
		<parent link="arm_a1"/>
		<child link="arm_a2" />
		<axis xyz="0 0 1"/>
		<limit lower="${radians(-180)}" upper="${radians(180)}" effort="40" velocity="30"/>
	</joint>

	<!-- <joint name="dummy_joint" type="fixed">
		<parent link="dummy"/>   
		<child link="arm_a1"/>
	</joint> -->
	
	<!--Arm 2-->

	<link name="arm_a2">
		<xacro:sw_visual file="ARM-A02"/>
		<xacro:sw_inertial
			m="3.6524"
			X="0"
			Y="2.7203"
			Z="0.03799"
			Lxx="21.53"
			Lxy="0"
			Lxz="0"
			Lyy="10.896"
			Lyz="0.14287"
			Lzz="14.594"
			file="ARM-A02"
		/>
	</link>
	<joint name="arm_j2" type="revolute">
		<xacro:sw_origin x="0" y="3.75000000" z="0"/>
		<parent link="arm_a2"/>
		<child link="arm_a3"/>
		<axis xyz="0 1 0"/>
		<limit lower="${radians(-135)}" upper="${radians(15)}" effort="125" velocity="30"/>
	</joint>

	<!--Arm 3-->

	<link name="arm_a3">
		<xacro:sw_visual file="ARM-A03"/>
		<xacro:sw_inertial
			m="6.5626"
			X="9.0018"
			Y="-0.00037"
			Z="4.4146"
			Lxx="65.558"
			Lxy="-0.15469"
			Lxz="0.02472"
			Lyy="525.31"
			Lyz="-0.00494"
			Lzz="465.43"
			file="ARM-A03"
		/>
	</link>

	<joint name="arm_j3" type="revolute">
		<xacro:sw_origin x="18.00000000" y="0" z="0"/>
		<parent link="arm_a3"/>
		<child link="arm_a4"/>
		<axis xyz="0 1 0"/>
		<limit lower="${radians(-120)}" upper="${radians(120)}" effort="80" velocity="30"/>
	</joint>

	<!--Arm 4-->

	<link name="arm_a4">
		<xacro:sw_visual file="ARM-A04"/>
		<xacro:sw_inertial
			m="5.2840"
			X="4.9938"
			Y="0.0000"
			Z="0.0189"
			Lxx="17.7636"
			Lxy="-0.0006"
			Lxz="-1.1308"
			Lyy="240.1392"
			Lyz="-0.0001"
			Lzz="227.3199"
			file="ARM-A04"
		/>
	</link>

	<joint name="arm_j4" type="continuous">
		<xacro:sw_origin x="4.48622047" y="0" z="0"/>
		<parent link="arm_a4"/>
		<child link="arm_a5"/>
		<axis xyz="1 0 0"/>
		<limit effort="30" velocity="30"/>
	</joint>

	<!--Arm 5-->

	<link name="arm_a5">
		<xacro:sw_visual file="ARM-A05"/>
		<xacro:sw_inertial
			m="2.8972"
			X="14.8203"
			Y="0.0000"
			Z="0.2634"
			Lxx="19.6638"
			Lxy="-0.0018"
			Lxz="1.7653"
			Lyy="43.6205"
			Lyz="-0.0010"
			Lzz="30.6708"
			file="ARM-A05"
		/>
	</link>

	<joint name="arm_j5" type="revolute">
		<xacro:sw_origin x="17.25000000" y="0" z="0"/>
		<parent link="arm_a5"/>
		<child link="arm_a6"/>
		<axis xyz="0 1 0"/>
		<limit lower="${radians(-90)}" upper="${radians(90)}" effort="30" velocity="30"/>
	</joint>

	<!--Arm 6-->

	<link name="arm_a6">
		<xacro:sw_visual file="ARM-A06"/>
		<xacro:sw_inertial
			m="2.2545"
			X="1.6113"
			Y="-0.0138"
			Z="0.0240"
			Lxx="8.2279"
			Lxy="-0.0415"
			Lxz="-0.0881"
			Lyy="9.0021"
			Lyz="0.0008"
			Lzz="6.2503"
			file="ARM-A06"
		/>
	</link>

	<joint name="arm_j6" type="continuous">
		<xacro:sw_origin x="2.98622047" y="0" z="0"/>
		<parent link="arm_a6"/>
		<child link="arm_a7"/>
		<axis xyz="1 0 0"/>
		<limit effort="30" velocity="30"/>
	</joint>

	<!--Arm 7-->	

	<link name="arm_a7">

		<inertial>
            <mass value="${lbtokg}"/>
            <xacro:sw_origin x="0" y="0" z="0"/>
            <inertia
                ixx="${0.01*lbsqintokgsqm}" ixy="${0.00*lbsqintokgsqm}" ixz="${-0.00*lbsqintokgsqm}"
                iyy="${0.01*lbsqintokgsqm}" iyz="${-0.00*lbsqintokgsqm}"
                izz="${0.01*lbsqintokgsqm}"/>
        </inertial>
        <collision>
            <xacro:sw_origin x="0" y="0" z="0"/>
            <geometry>
                <box size="0.01 0.01 0.01"/>
            </geometry>
        </collision>
	</link>


	<!--Defining ROS2 Control Joints-->
	
	<ros2_control name="GazeboSystem" type="system">
        <hardware>
        	<plugin>gazebo_ros2_control/GazeboSystem</plugin>
        </hardware>

		<xacro:arm_joint_creator name="arm_j1"/>
		<xacro:arm_joint_creator name="arm_j2"/>
		<xacro:arm_joint_creator name="arm_j3"/>
		<xacro:arm_joint_creator name="arm_j4"/>
        <xacro:arm_joint_creator name="arm_j5"/>    
		<xacro:arm_joint_creator name="arm_j6"/>	

	</ros2_control>


	<gazebo>
        <plugin name="gazebo_ros2_control" filename="libgazebo_ros2_control.so">
            <parameters> $(find my_bot)/config/arm_controllers.yaml</parameters>
        </plugin>
    </gazebo>

</robot>

